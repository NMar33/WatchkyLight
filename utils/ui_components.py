
import streamlit as st
import plotly.express as px
import pandas as pd

def display_summary_statistics(df):
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö."""
    st.header("–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
    st.write(f"–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π: **{len(df):,}**")
    st.write(f"–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: **{df['user_id'].nunique():,}**")
    st.write(f"–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã: **{df['region'].nunique():,}**")
    st.write(f"–î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç: **{df['timestamp'].min()}** ‚Äî **{df['timestamp'].max()}**")

def apply_filters(df):
    """–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö."""
    st.sidebar.title("‚öôÔ∏è –§–∏–ª—å—Ç—Ä—ã")
    region_filter = st.sidebar.multiselect("–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω—ã", df['region'].unique(), default=df['region'].unique()[:3])
    device_filter = st.sidebar.multiselect("–í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞", df['device_type'].unique(), default=df['device_type'].unique()[:3])
    date_range = st.sidebar.date_input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç", [df['timestamp'].min(), df['timestamp'].max()])

    filtered_df = df[
        (df['region'].isin(region_filter)) &
        (df['device_type'].isin(device_filter)) &
        (df['timestamp'].dt.date.between(date_range[0], date_range[1]))
    ]
    st.sidebar.write(f"üîç –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: {len(filtered_df):,}")
    return filtered_df

def render_region_analysis(filtered_df):
    """–ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º."""
    st.header("–ê–Ω–∞–ª–∏–∑ —Ä–µ–≥–∏–æ–Ω–æ–≤")
    region_counts = filtered_df['region'].value_counts()
    fig_region = px.bar(region_counts, x=region_counts.index, y=region_counts.values,
                        labels={'x': '–†–µ–≥–∏–æ–Ω', 'y': '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π'},
                        title="–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º")
    st.plotly_chart(fig_region)

def render_qoe_metrics(filtered_df):
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ QoE."""
    st.header("–ú–µ—Ç—Ä–∏–∫–∏ QoE (–ö–∞—á–µ—Å—Ç–≤–æ –æ–ø—ã—Ç–∞)")
    qoe_metrics = {
        "–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–º—Å)": filtered_df['initial_playback_delay_ms'].mean(),
        "–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∏–±—É—Ñ–µ—Ä–æ–≤": filtered_df['rebuffer_count'].mean(),
        "–û–±—â–µ–µ –≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ (–º—Å)": filtered_df['total_stall_duration_ms'].mean(),
        "–°—Ä–µ–¥–Ω–∏–π –±–∏—Ç—Ä–µ–π—Ç (–ö–±–∏—Ç/—Å)": filtered_df['average_bitrate_kbps'].mean(),
    }
    for metric, value in qoe_metrics.items():
        st.write(f"**{metric}:** {value:.2f}")

def render_playback_delay_histogram(filtered_df):
    """–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è."""
    st.subheader("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è")
    fig_delay = px.histogram(filtered_df, x='initial_playback_delay_ms', nbins=30,
                             title="–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–º—Å)",
                             labels={'initial_playback_delay_ms': '–ó–∞–¥–µ—Ä–∂–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–º—Å)'})
    st.plotly_chart(fig_delay)

def render_time_series_analysis(filtered_df, time_group):
    """–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞."""
    time_metrics = filtered_df.groupby('time_group').agg({
        'initial_playback_delay_ms': 'mean',
        'rebuffer_count': 'mean',
        'average_bitrate_kbps': 'mean'
    }).reset_index()

    st.subheader("–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–º—Å) –≤–æ –≤—Ä–µ–º–µ–Ω–∏")
    fig_delay_time = px.line(time_metrics, x='time_group', y='initial_playback_delay_ms',
                             title="–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏",
                             labels={'time_group': '–í—Ä–µ–º—è', 'initial_playback_delay_ms': '–ó–∞–¥–µ—Ä–∂–∫–∞ (–º—Å)'})
    st.plotly_chart(fig_delay_time)

    st.subheader("–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∏–±—É—Ñ–µ—Ä–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–∏")
    fig_rebuffer_time = px.line(time_metrics, x='time_group', y='rebuffer_count',
                                title="–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∏–±—É—Ñ–µ—Ä–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–∏",
                                labels={'time_group': '–í—Ä–µ–º—è', 'rebuffer_count': '–†–∏–±—É—Ñ–µ—Ä—ã'})
    st.plotly_chart(fig_rebuffer_time)

    st.subheader("–°—Ä–µ–¥–Ω–∏–π –±–∏—Ç—Ä–µ–π—Ç (–ö–±–∏—Ç/—Å) –≤–æ –≤—Ä–µ–º–µ–Ω–∏")
    fig_bitrate_time = px.line(time_metrics, x='time_group', y='average_bitrate_kbps',
                               title="–°—Ä–µ–¥–Ω–∏–π –±–∏—Ç—Ä–µ–π—Ç –≤–æ –≤—Ä–µ–º–µ–Ω–∏",
                               labels={'time_group': '–í—Ä–µ–º—è', 'average_bitrate_kbps': '–ë–∏—Ç—Ä–µ–π—Ç (–ö–±–∏—Ç/—Å)'})
    st.plotly_chart(fig_bitrate_time)

def render_comparison_chart(time_metrics, metrics_to_compare):
    """–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–∏."""
    st.header("üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–∏")
    if metrics_to_compare:
        fig_compare = px.line(
            time_metrics,
            x='time_group',
            y=metrics_to_compare,
            title="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–∏",
            labels={'time_group': '–í—Ä–µ–º—è', 'value': '–ó–Ω–∞—á–µ–Ω–∏–µ', 'variable': '–ú–µ—Ç—Ä–∏–∫–∞'},
            markers=True
        )
        fig_compare.update_traces(mode="lines+markers")
        st.plotly_chart(fig_compare)
    else:
        st.warning("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –º–µ—Ç—Ä–∏–∫—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.")

def format_ranges(thresholds, reverse=False):
    if reverse:
        return f"< {thresholds['good']}", f"{thresholds['good']}‚Äì{thresholds['average']}", f"{thresholds['average']}‚Äì{thresholds['bad']}", f"> {thresholds['bad']}"
    else:
        return f"> {thresholds['good']}", f"{thresholds['average']}‚Äì{thresholds['good']}", f"{thresholds['bad']}‚Äì{thresholds['average']}", f"< {thresholds['bad']}"

def display_settings_tables(settings, params_translation):
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –≤–∏–¥–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü."""
    st.write("### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
    st.subheader("–ü–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º:")
    for device, params in settings["device"].items():
        st.markdown(f"#### **{device}**")
        device_data = []
        for param, thresholds in params.items():
            device_data.append(
                [params_translation[param], *format_ranges(thresholds, reverse=(param != "average_bitrate_kbps"))]
            )
        device_df = pd.DataFrame(
            device_data, columns=["–ü–∞—Ä–∞–º–µ—Ç—Ä", "–•–æ—Ä–æ—à–æ", "–°—Ä–µ–¥–Ω–µ", "–ü–ª–æ—Ö–æ", "–ö—Ä–∏—Ç–∏—á–Ω–æ"]
        )
        st.table(device_df)

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    st.subheader("–ü–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:")
    for duration, params in settings["duration"].items():
        st.markdown(f"#### **{duration.capitalize()}**")
        duration_data = []
        for param, thresholds in params.items():
            duration_data.append(
                [params_translation[param], *format_ranges(thresholds, reverse=(param != "average_bitrate_kbps"))]
            )
        duration_df = pd.DataFrame(
            duration_data, columns=["–ü–∞—Ä–∞–º–µ—Ç—Ä", "–•–æ—Ä–æ—à–æ", "–°—Ä–µ–¥–Ω–µ", "–ü–ª–æ—Ö–æ", "–ö—Ä–∏—Ç–∏—á–Ω–æ"]
        )
        st.table(duration_df)


def display_settings_editor(settings, params_translation, tab_name):
    """–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —á–µ—Ä–µ–∑ Streamlit —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–æ—Ä–º—ã."""
    st.header(f"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ {tab_name}")
    for category, params in settings[tab_name].items():
        with st.expander(f"{tab_name.capitalize()}: {category}"):
            # –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ä–º—É –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            with st.form(key=f"{tab_name}_{category}_form"):
                for param, thresholds in params.items():
                    STEP = 100 if param != "rebuffer_count" else 1
                    st.write(f"**{params_translation[param]}**:")
                    col1, col2, col3 = st.columns(3)
                    thresholds["good"] = col1.number_input(
                        "–•–æ—Ä–æ—à–æ", value=thresholds["good"], step=STEP, key=f"{category}_{param}_good"
                    )
                    thresholds["average"] = col2.number_input(
                        "–°—Ä–µ–¥–Ω–µ", value=thresholds["average"], step=STEP, key=f"{category}_{param}_average"
                    )
                    thresholds["bad"] = col3.number_input(
                        "–ü–ª–æ—Ö–æ", value=thresholds["bad"], step=STEP, key=f"{category}_{param}_bad"
                    )
                # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º—É
                submitted = st.form_submit_button("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è")
                if submitted:
                    st.success(f"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è {category} —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.")

def display_solution_ideas():
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–¥–µ–π, –ª–µ–∂–∞—â–∏—Ö –≤ –æ—Å–Ω–æ–≤–µ —Ä–µ—à–µ–Ω–∏—è, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ."""
    with st.expander("### –ò–¥–µ–∏, –ª–µ–∂–∞—â–∏–µ –≤ –æ—Å–Ω–æ–≤–µ –Ω–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è", expanded=True):
        st.markdown("""
        #### 1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–º–µ—á–∞–µ—Ç –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞, –∞ –Ω–µ —É–¥–æ–±—Å—Ç–≤–∞.**  
        –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ, —á–µ–ª–æ–≤–µ–∫ —ç—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç. –≠—Ç–æ "–•–û–†–û–®–û" —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞, –∏ –Ω–µ—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ —Ä–∞–≤–Ω–æ 0. –ù–æ –∫–∞–∫ —Ç–æ–ª—å–∫–æ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫, –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ø—Ä–æ–±–ª–µ–º—ã:
        - **–õ—ë–≥–∫–∏–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.** –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–±–æ–ª—å—à–∏–µ —Ñ—Ä–∏–∑—ã. –û–Ω–∏ –Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞—é—Ç –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å —Å–ø–æ—Å–æ–±–Ω–∞ –≤—ã–≤–µ—Å—Ç–∏ –∏–∑ —Å–µ–±—è. –ú—ã –æ—Ç–Ω–æ—Å–∏–º —ç—Ç–æ –∫ "–°—Ä–µ–¥–Ω–µ–º—É –∫–∞—á–µ—Å—Ç–≤—É" —Å–æ —Å–∫–æ—Ä–æ–º –Ω–µ—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è 1.  
        - **–°–µ—Ä—å—ë–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.** –û–±—Ä–µ–∑–∞—Ç—å —Å–µ—Ä–∏–∞–ª –Ω–∞ —Å–∞–º–æ–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–º –º–µ—Å—Ç–µ? –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—è–¥ –ª–∏ –ø—Ä–æ—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ. –≠—Ç–æ —É–∂–µ "–ü–ª–æ—Ö–æ–µ" (—Å–∫–æ—Ä 2) –∏–ª–∏ "–ö—Ä–∏—Ç–∏—á–Ω–æ–µ" –∫–∞—á–µ—Å—Ç–≤–æ (—Å–∫–æ—Ä 3).  
        - **–§–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏.** –≠—Ç–æ –Ω–µ –ø—Ä–æ –Ω–∞—à —Å–µ—Ä–≤–∏—Å (–Ω–∞–¥–µ–µ–º—Å—è!), –Ω–æ –±—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "—É–±–∏–≤–∞—é—Ç" —Å—Ä–∞–∑—É: —Å–ø–∏—Å–∞–ª–∏ –ª–∏—à–Ω–∏–µ –¥–µ–Ω—å–≥–∏ –∏–ª–∏ –ø–æ–∫–∞–∑–∞–ª–∏ –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç. –û–Ω–∏ –∑–∞ —Ä–∞–º–∫–∞–º–∏ –Ω–∞—à–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞, —Ç–∞–∫ –∫–∞–∫ —Ç—Ä–µ–±—É—é—Ç –¥—Ä—É–≥–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

        #### 2. **–ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç —Å –Ω–∞–º–∏?**  
        –ù–µ—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –∫–æ–ø–∏—Ç—Å—è. –ß–µ–º –±–æ–ª—å—à–µ —Ä–∞–∑–¥—Ä–∞–∂–∞—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, —Ç–µ–º –≤—ã—à–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ —á–µ–ª–æ–≤–µ–∫ –Ω–∞—á–Ω—ë—Ç –∏—Å–∫–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã. –ù–æ –≤—Å—ë –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç —É–Ω–∏–∫–∞–ª–µ–Ω –∏–ª–∏ —Ü–µ–Ω–∞ –Ω–∏–∑–∫–∞—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ç–µ—Ä–ø–µ—Ç—å –¥–æ–ª—å—à–µ.

        ---

        ### –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?

        - **–ò–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Ç—Ç–æ–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –¢–æ–≥–¥–∞ "—Å–∫–æ—Ä –Ω–µ—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è" –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–ª –±—ã, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–π–¥—ë—Ç.  
        - **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å:** –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞–±–ª–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ü–æ–∫–∞ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ. –î–æ–ø–æ–ª–Ω–∏–º –µ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π. –í –∏–¥–µ–∞–ª–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–µ–º–ª–µ–º—ã–º –∏ —á—Ç–æ –Ω–µ—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

        ---

        ### –ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ

        –ú—ã —Å–æ–∑–¥–∞–ª–∏ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –æ—Ü–µ–Ω–æ–∫. –°–µ–π—á–∞—Å –æ–Ω–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –º–æ—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –æ–ø—ã—Ç–µ, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∞–Ω—ã:
        - **–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è:**  
          - –í–∏–¥–µ–æ –∫–æ—Ä–æ—Ç–∫–æ–µ (–º–µ–º—ã —Å –∫–æ—Ç–∏–∫–∞–º–∏)? –í–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏, –∞ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–µ —Ç–∞–∫ –∫—Ä–∏—Ç–∏—á–Ω–æ.  
          - –í–µ—á–µ—Ä–Ω–∏–π —Ñ–∏–ª—å–º? –ì–æ—Ç–æ–≤ –ø–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É, –Ω–æ –ª–∞–≥–∏ –∏–ª–∏ –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ ‚Äî —Å—Ä–∞–∑—É –º–∏–Ω—É—Å.

        - **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**  
          1. –ë–µ—Ä—ë–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ) –∏ —Å–≤–µ—Ä—è–µ–º –∏—Ö —Å —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π. –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –æ—Ü–µ–Ω–∫—É ‚Äî "–•–æ—Ä–æ—à–æ", "–°—Ä–µ–¥–Ω–µ", "–ü–ª–æ—Ö–æ" –∏–ª–∏ "–ö—Ä–∏—Ç–∏—á–Ω–æ" ‚Äî –ø–æ –∫–ª—é—á–µ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (–±–∏—Ç—Ä–µ–π—Ç, –∑–∞–¥–µ—Ä–∂–∫–∞ –∏ —Ç.–¥.).  
          2. –£—á–∏—Ç—ã–≤–∞–µ–º –¥–ª–∏–Ω—É –≤–∏–¥–µ–æ: –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ä–æ–ª–∏–∫–æ–≤ –∏ —Ñ–∏–ª—å–º–æ–≤ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Ä–∞–∑–Ω—ã–µ.  
          3. –ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —Å–∫–æ—Ä, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ, –Ω–æ —Å **–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –∑–ª–æ–ø–∞–º—è—Ç–Ω–æ—Å—Ç–∏**. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–µ—Ä—å—ë–∑–Ω–∞—è, –µ—ë –≤–µ—Å –±—É–¥–µ—Ç –≤—ã—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2—Ö).  
        """)
