# **Упрощенная версия Watchly**

Это **урезанная версия** решения, разработанная для упрощенного запуска. Полная версия доступна по ссылке: [Watchly на GitHub](https://github.com/NMar33/Watchly.git).

### **Режимы работы:**
1. **Без использования базы данных:**
   - Данные загружаются из файлов, расположенных в папке `data/raw`.

2. **С использованием базы данных ClickHouse:**
   - Для активации работы с базой данных в файле `utils/data_loader.py` необходимо изменить переменную `SOURCE` на `'clickhouse'`.

---

## **Шаг 1: Установка виртуального окружения и зависимостей**

### **1. Создание виртуального окружения**
```bash
python -m venv demo_venv
```

### **2. Активация виртуального окружения**
- Для Linux/MacOS:
  ```bash
  source demo_venv/bin/activate
  ```
- Для Windows:
  ```bash
  demo_venv\\Scripts\\activate
  ```

### **3. Установка зависимостей**
```bash
pip install -r requirements.txt
```

### **4. Запустите Streamlit**
Для запуска дашборда выполните следующую команду:
```bash
streamlit run dashboard.py
```


---

## **Технические детали**

### **1. Основные компоненты**
- **Страница EDA**:
  - Фильтры для исследования данных и динамические визуализации.
  - Отображение таких метрик, как задержка воспроизведения, количество буферизаций и средний битрейт.

- **Страница настроек QoE**:
  - Настройка порогов удовлетворенности для различных типов устройств и длительности видео.
  - Реализация формулы взвешенного опыта с использованием коэффициента злопамятности.

### **2. Формула взвешенного опыта**
Формула оценивает пользовательский опыт, комбинируя оценки из двух таблиц (устройство и длительность):

```
Итоговый опыт = (k1 * Опыт устройства + k2 * Опыт длительности) / (k1 + k2)
```
- Коэффициенты (`k1`, `k2`) динамически настраиваются на основе **коэффициента злопамятности**, что позволяет придавать больше значения негативному опыту.

### **3. Модульная кодовая база**
- `data_loader.py`: Загрузка данных из ClickHouse или локальных файлов.
- `ui_components.py`: Модульные компоненты для визуализации данных.
- `formulas.py`: Реализация формулы взвешенного опыта.
- `settings_manager.py`: Управление настройками.

---

## **Уникальные особенности**
1. **Динамическая формула QoE**:
   - Коэффициент злопамятности усиливает влияние негативного опыта на общую оценку.

2. **Инсайты по устройствам и длительности**:
   - Индивидуальные пороги для различных устройств и длительности видео обеспечивают точный анализ.

3. **Интерактивные визуализации**:
   - Анализ пользовательского опыта во времени с опциями почасовой или ежедневной агрегации.

4. **Полная кастомизация**:
   - Все настройки хранятся в одном JSON-файле для удобного обновления и повторного использования.

